<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      direction: rtl;
      background: #f5f5f5;
    }
    .container {
      max-width: 800px;
      margin: 20px auto;
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .slider-container {
      position: relative;
      overflow: hidden;
      border-radius: 10px;
    }
    .slides {
      display: flex;
      transition: transform 0.3s ease;
    }
    .slides img {
      width: 100%;
      object-fit: cover;
    }
    .details {
      margin-top: 20px;
    }
    .order-btn {
      background: green;
      color: #fff;
      border: none;
      padding: 10px 20px;
      cursor: pointer;
      border-radius: 5px;
      transition: background 0.3s ease;
    }
    .order-btn:hover { background: #006400; }
  </style>
</head>
<body>
  <div class="container">
    <div id="product-container"></div>
  </div>
  
  <script>
    // Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬ Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ
    let product = JSON.parse(localStorage.getItem("selectedProduct"));
    // Ù…Ø¬Ù…ÙˆØ¹Ø© ØµÙˆØ± Ù„Ù„Ù…Ø¹Ø±Ø¶ (ÙŠÙ…ÙƒÙ†Ùƒ ØªØ¹Ø¯ÙŠÙ„Ù‡Ø§ Ù„Ø§Ø­Ù‚Ø§Ù‹)
    let slideImages = [
      product.img, 
      "https://via.placeholder.com/800x400/ff7f7f/333333?text=Ø§Ù„ØµÙˆØ±Ø©+2",
      "https://via.placeholder.com/800x400/7fbfff/333333?text=Ø§Ù„ØµÙˆØ±Ø©+3"
    ];
    
    // Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ± Ù…Ø¹ Ø¯Ø¹Ù… Ø§Ù„Ø³Ø­Ø¨
    let currentSlide = 0;
    function renderSlides() {
      const slidesContainer = document.getElementById("slides");
      slidesContainer.innerHTML = slideImages.map(src => `<img src="${src}" alt="ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬">`).join("");
    }
    function updateSlidePosition() {
      const slidesContainer = document.getElementById("slides");
      slidesContainer.style.transform = `translateX(-${currentSlide * 100}%)`;
    }
    
    let startX = 0;
    let isDragging = false;
    const slider = document.getElementById("slider");
    
    function touchStart(e) {
      isDragging = true;
      startX = e.touches[0].clientX;
    }
    function touchMove(e) {
      if(!isDragging) return;
      let currentX = e.touches[0].clientX;
      let diff = startX - currentX;
      // Ù„Ø§ Ù†Ù‚ÙˆÙ… Ø¨ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ù‡Ù†Ø§ØŒ ÙÙ‚Ø· Ù†Ù†ØªØ¸Ø± Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ Ù…Ù† Ø§Ù„Ø³Ø­Ø¨
    }
    function touchEnd(e) {
      if(!isDragging) return;
      let endX = e.changedTouches[0].clientX;
      let diff = startX - endX;
      if(diff > 50 && currentSlide < slideImages.length - 1) {
        currentSlide++;
      } else if(diff < -50 && currentSlide > 0) {
        currentSlide--;
      }
      updateSlidePosition();
      isDragging = false;
    }
    
    // Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬ Ù…Ø¹ Ø§Ù„Ù…Ø¹Ø±Ø¶
    if(product) {
      document.getElementById("product-container").innerHTML = `
         <h2>${product.name}</h2>
         <div class="slider-container" id="slider" 
              ontouchstart="touchStart(event)" 
              ontouchmove="touchMove(event)" 
              ontouchend="touchEnd(event)">
           <div class="slides" id="slides">
             <!-- Ø³ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ± Ù‡Ù†Ø§ -->
           </div>
         </div>
         <div class="details">
            <p>Ø§Ù„Ø³Ø¹Ø±: ${product.price} Ø±ÙŠØ§Ù„</p>
            <p>Ø§Ù„ØªÙØ§ØµÙŠÙ„: ${product.description}</p>
            <button class="order-btn" onclick="addToCart('${product.name}', ${product.price}, '${product.img}', '${product.description}')">ğŸ›’ Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©</button>
         </div>
      `;
      renderSlides();
    } else {
      document.getElementById("product-container").innerHTML = "<p>Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙØ§ØµÙŠÙ„ Ù„Ù„Ø¹Ø±Ø¶</p>";
    }
    
    function addToCart(name, price, img, description) {
       let cart = JSON.parse(localStorage.getItem("cart")) || [];
       cart.push({ name, price, img, description });
       localStorage.setItem("cart", JSON.stringify(cart));
       alert("ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©");
    }
  </script>
</body>
</html>
